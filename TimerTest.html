<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Тест</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .timer { font-size: 1.2em; margin-top: 10px; }
  </style>
</head>
<body>
  <h1 id="title">Завантаження...</h1>
  <div class="timer">
    ⏳ Тривалість: <span id="duration">--</span> хв<br>
    Залишилось: <span id="remaining">--:--</span>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const testId = urlParams.get('id');

    if (!testId) {
      document.getElementById('title').textContent = "Не вказано тест";
      document.getElementById('duration').textContent = "0";
      document.getElementById('remaining').textContent = "Час вичерпано";
    } else {
      const jsonUrl = `${testId}.json`;

      fetch(jsonUrl)
        .then(response => {
          if (!response.ok) throw new Error("Файл не знайдено");
          return response.json();
        })
        .then(data => {
          document.getElementById('title').textContent = data.title || "Без назви";
          document.getElementById('duration').textContent = data.duration || "0";

          let seconds = (data.duration || 0) * 60;
          const remainingEl = document.getElementById('remaining');

          function updateTimer() {
            if (seconds <= 0) {
              remainingEl.textContent = "Час вичерпано";
              return;
            }
            const min = Math.floor(seconds / 60);
            const sec = seconds % 60;
            remainingEl.textContent = `${min}:${sec.toString().padStart(2, '0')}`;
            seconds--;
            setTimeout(updateTimer, 1000);
          }

          updateTimer();
        })
        .catch(err => {
          document.getElementById('title').textContent = "Помилка завантаження";
          document.getElementById('duration').textContent = "0";
          document.getElementById('remaining').textContent = "Час вичерпано";
        });
    }
  </script>
</body>
</html>
