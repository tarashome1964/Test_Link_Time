<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–¢–µ—Å—Ç –±–µ–∑ –≥–æ–¥–∏–Ω–Ω–∏–∫–∞</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      text-align: center;
      background: url("LPK.jpg") no-repeat center center fixed;
      background-size: cover;

      /* üîí –ó–∞–±–æ—Ä–æ–Ω–∞ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É */
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
    }

    .overlay {
      background: rgba(250, 248, 244, 0.92);
      padding: 20px;
      min-height: 100vh;
    }
    .subject-img {
      width: 140px;
      margin-bottom: 10px;
    }
    .time-info {
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 20px;
    }
    #timerDisplay {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
      background: #fff;
      border: 2px solid #555;
      border-radius: 10px;
      display: inline-block;
      padding: 8px 16px;
      min-width: 120px;
    }
    #scaleBar {
      width: 80%;
      margin: 0 auto 10px;
      height: 30px;
      position: relative;
    }
    .tick {
      position: absolute;
      top: 0;
      width: 2px;
      background: #333;
    }
    .tick.long {
      height: 15px;
    }
    .tick.short {
      height: 8px;
    }
    .tick-label {
      position: absolute;
      top: 18px;
      font-size: 12px;
      transform: translateX(-50%);
    }
    #progressBar {
      width: 80%;
      height: 20px;
      background-color: red;
      border: 2px solid #555;
      border-radius: 10px;
      margin: 10px auto 20px;
      position: relative;
      overflow: hidden;
    }
    #progress {
      height: 100%;
      width: 100%;
      background-color: green;
      transition: width 1s linear, background-color 0.5s;
    }
    #warning {
      color: red;
      font-weight: bold;
      display: none;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }
    iframe {
      width: 90%;
      max-width: 600px;
      height: 500px;
      border: none;
      margin-top: 20px;
    }
  </style>
</head>

<!-- üñ±Ô∏è –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–æ—ó –∫–Ω–æ–ø–∫–∏ –º–∏—à—ñ -->
<body oncontextmenu="return false">
  <div class="overlay">

    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è--------------------->
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <h2>¬´–õ—å–≤—ñ–≤—Å—å–∫–∏–π –ø–æ–ª—ñ–≥—Ä–∞—Ñ—ñ—á–Ω–∏–π —Ñ–∞—Ö–æ–≤–∏–π –∫–æ–ª–µ–¥–∂ –£–ê–î¬ª</h2>
    <img src="Logo.png" alt="–§–æ—Ç–æ –ø—Ä–µ–¥–º–µ—Ç—É" class="subject-img">

    <div class="time-info">
      üóìÔ∏è <strong>–¢–µ—Å—Ç –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –¥–æ:</strong> 19.07.2025, 18:54<br>
      ‚è∞ <strong>–ü—Ä–æ—Ö–∞–Ω–Ω—è –∑–¥–∞—Ç–∏ —Ç–µ—Å—Ç –¥–æ:</strong> 19.07.2025, 18:00<br>
      üîí <strong>–ß–∞—Å –ø–æ—á–∞—Ç–∫—É —Ç–µ—Å—Ç—É:</strong> <span id="startTime"></span>
    </div>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>

    <div id="timerDisplay">00:00</div>

    <div id="scaleBar"></div>
    <div id="progressBar"><div id="progress"></div></div>
    <div id="warning">‚è∞ –ß–∞—Å –º–∞–π–∂–µ –≤–∏—á–µ—Ä–ø–∞–Ω–æ!</div>

    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------–®–ª—è—Ö –¥–æ —Ç–µ—Å—Ç—É –Ω–∞ Googl Forms-------------------->
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <iframe id="testFrame" src="https://docs.google.com/forms/d/e/1FAIpQLSfZlNf_d0L_jZ-cQzNFo-EsSREWD5enmFmZAvo8_gm-4uqkFg/viewform?embedded=true"></iframe>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
    <!------------------------------------------------------------>
  </div>

  <script>
    function showStartTime() {
      const now = new Date();
      const formatted = now.toLocaleString('uk-UA', {
        day: '2-digit', month: '2-digit', year: 'numeric',
        hour: '2-digit', minute: '2-digit'
      });
      document.getElementById("startTime").innerText = formatted;
    }
    showStartTime();

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–∞—Å—É –∑ time.txt
    fetch("time.txt")
      .then(response => response.text())
      .then(text => {
        const totalMinutes = parseInt(text.trim());
        if (isNaN(totalMinutes) || totalMinutes < 1 || totalMinutes > 60) {
          alert("‚ùó –ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç —É time.txt. –ú–∞—î –±—É—Ç–∏ —Ü—ñ–ª–µ —á–∏—Å–ª–æ –≤—ñ–¥ 1 –¥–æ 60.");
          return;
        }

        const totalSeconds = totalMinutes * 60;
        let remainingSeconds = totalSeconds;

        function updateTimer() {
          if (remainingSeconds <= 0) {
            clearInterval(timerInterval);
            alert("‚õî –ß–∞—Å –≤–∏—á–µ—Ä–ø–∞–Ω–æ! –ù–∞–¥—ñ—à–ª—ñ—Ç—å —Ñ–æ—Ä–º—É, —è–∫—â–æ —â–µ –Ω–µ –∑—Ä–æ–±–∏–ª–∏ —Ü–µ.");
            document.getElementById("testFrame").style.display = "none";
            document.getElementById("progress").style.width = "0%";
            return;
          }

          const min = Math.floor(remainingSeconds / 60);
          const sec = remainingSeconds % 60;
          document.getElementById("timerDisplay").textContent = `${min}:${sec.toString().padStart(2, '0')}`;

          const percentRemaining = (remainingSeconds / totalSeconds) * 100;
          document.getElementById("progress").style.width = percentRemaining + "%";

          if (remainingSeconds <= 120) {
            document.getElementById("warning").style.display = "block";
            document.getElementById("progress").style.backgroundColor = "red";
          } else if (remainingSeconds <= 300) {
            document.getElementById("progress").style.backgroundColor = "orange";
          }

          remainingSeconds--;
        }

        const timerInterval = setInterval(updateTimer, 1000);
        updateTimer();

        function createScaleBar() {
          const scale = document.getElementById("scaleBar");
          for (let m = 0; m <= totalMinutes; m++) {
            const tick = document.createElement("div");
            const tickType = m % 5 === 0 ? "long" : "short";
            tick.className = `tick ${tickType}`;
            tick.style.left = `${(m / totalMinutes) * 100}%`;
            scale.appendChild(tick);

            if (m % 5 === 0) {
              const label = document.createElement("div");
              label.className = "tick-label";
              label.style.left = `${(m / totalMinutes) * 100}%`;
              label.textContent = `${m}:00`;
              scale.appendChild(label);
            }
          }
        }
        createScaleBar();
      })
      .catch(() => {
        alert("‚ùó –ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª time.txt");
      });

    // ‚å®Ô∏è –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è Ctrl+C, Ctrl+U, PrintScreen
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && ['c','u'].includes(e.key.toLowerCase())) {
        e.preventDefault();
      }
      if (e.key === 'PrintScreen') {
        e.preventDefault();
      }
    });

    // üé≠ –ü—ñ–¥–º—ñ–Ω–∞ –±—É—Ñ–µ—Ä–∞ –æ–±–º—ñ–Ω—É –Ω–∞ ¬´—Ñ—ñ–≥–Ω—é¬ª
    document.addEventListener('copy', function(e) {
      e.preventDefault();
      e.clipboardData.setData('text/plain', '–¶–µ–π —Ç–µ–∫—Å—Ç –Ω–µ –º–æ–∂–Ω–∞ –∫–æ–ø—ñ—é–≤–∞—Ç–∏. –Ü –≤–∑–∞–≥–∞–ª—ñ ‚Äî —Ñ—ñ–≥–Ω—è!');
    });
  </script>
</body>
</html>
